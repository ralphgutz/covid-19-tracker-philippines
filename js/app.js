function loop(a){result=[];for(let e=a.length-1;e>=a.length-15;e--)result.unshift(a[e]);return result}function loopNewCases(a){result=[];for(let e=a.length-1;e>=a.length-15;e--)result.unshift(a[e].infected-a[e-1].infected);return result}$(document).ready(function(){axios({method:"GET",url:"https://api.apify.com/v2/datasets/sFSef5gfYg3soj8mb/items?format=json&clean=1"}).then(a=>{data=a.data,$("div span").hide();let e=loop(data),t=loop(data),o=loopNewCases(data);Chart.defaults.global.defaultFontFamily="Noto";let s=$("#cases-chart"),l=(new Chart(s,{type:"line",data:{labels:e.map((a,e)=>a.lastUpdatedAtApify.slice(5,10)),datasets:[{label:"Confirmed",data:t.map((a,e)=>a.infected),borderColor:"rgba(19, 128, 253, 0.8)",backgroundColor:"rgba(0, 0, 0, 0)"},{label:"Recoveries",data:t.map((a,e)=>a.recovered),borderColor:"rgba(0, 159, 107, 0.8)",backgroundColor:"rgba(0, 0, 0, 0)"},{label:"Deaths",data:t.map((a,e)=>a.deceased),borderColor:"rgba(255, 78, 80, 0.8)",backgroundColor:"rgba(0, 0, 0, 0)"}]},options:{title:{display:!0,text:"Interactive Covid-19 Cases Graph",fontSize:18,fontColor:"#444444"},maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{color:"rgba(0, 0, 0, 0)"},scaleLabel:{display:!0,labelString:"Date (Year 2020)"}}],yAxes:[{scaleLabel:{display:!0,labelString:"No. of Case"}}]}}}),$("#new-cases-chart"));new Chart(l,{type:"bar",data:{labels:e.map((a,e)=>a.lastUpdatedAtApify.slice(5,10)),datasets:[{label:"New Cases",data:o,backgroundColor:"rgba(19, 128, 253, 0.8)"}]},options:{title:{display:!0,text:"New Cases Per Day",fontSize:18,fontColor:"#444444"},legend:{display:!1},maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{color:"rgba(0, 0, 0, 0)"},scaleLabel:{display:!0,labelString:"Date (Year 2020)"}}],yAxes:[{scaleLabel:{display:!0,labelString:"No. of New Cases"}}]}}})}).catch(a=>{alert("ERROR: Cannot connect to the server.")}),axios({method:"GET",url:"https://coronavirus-ph-api.herokuapp.com/total"}).then(a=>{data=a.data,$("#confirmed").append(`<h1 style="color: #1380fd">${data.data.cases}</h1><p>Confirmed Cases</p>`),$("#deaths").append(`<h1 style="color: #ff4e50">${data.data.deaths}</h1><p>Deaths</p>`),$("#recoveries").append(`<h1 style="color: #009f6b">${data.data.recoveries}</h1><p>Recoveries</p>`),$(".date").append(`<p style="color: #636363"><i>As of ${data.data.last_update}</i></p>`),$("#new-confirmed").append(`<h3 style="color: #1380fd">+${data.data.cases_today}</h3><p>New Confirmed Cases</p>`),$("#new-recoveries").append(`<h3 style="color: #009f6b">+${data.data.recoveries_today}</h3><p>New Recoveries</p>`),$("#new-deaths").append(`<h3 style="color: #ff4e50">+${data.data.deaths_today}</h3><p>New Deaths</p>`),$("#admitted").append(`<h3 style="color: #1380fd">${data.data.admitted}</h3><p>Admitted</p>`),$("#rate-recoveries").append(`<h3 style="color: #009f6b">${data.data.recovery_rate}</h3><p>Recovery Rate</p>`),$("#rate-deaths").append(`<h3 style="color: #ff4e50">${data.data.fatality_rate}</h3><p>Fatality Rate</p>`)}).catch(a=>{alert("ERROR: Cannot connect to the server.")})});
//TF are you doing here?
